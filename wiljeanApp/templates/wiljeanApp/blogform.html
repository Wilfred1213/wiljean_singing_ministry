{% extends 'wiljeanApp/base/base.html' %}

{% block title %} Upload {% endblock %}

{% block content %}
<main class="main-content " style="padding-top: 50px;">
    <div class="fullwidth-block inner-content">
        <div class="container">
            <h2 class="page-title ">Create Blog</h2>
            
            <div class="row">
                <div class="col-md-6">
                    <form method="post" action="{% url 'blog_upload' %}" enctype="multipart/form-data" class="contact-form">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="id_title">Title:</label>
                            {{ form.title }}
                            {% for error in form.title.errors %}
                            <p class="text-danger">{{ error }}</p>
                            {% endfor %}
                        </div>
                        <div class="form-group">
                            <label for="id_title">Content:</label>
                            {{ form.content | safe}}
                            {% for error in form.content.errors %}
                            <p class="text-danger">{{ error }}</p>
                            {% endfor %}
                        </div>
                        <div class="form-group">
                            <label for="id_music">Image:</label>
                            {{ form.image }}
                            <small class="text-muted">Maximum file size: 10MB</small>
                            {% for error in form.image.errors %}
                            <p class="text-danger">{{ error }}</p>
                            {% endfor %}
                        </div>

                        
                        <input type="submit" value="Create Blog" class="btn btn-primary">
                    </form>
                </div>
                <div class="col-md-6">
                    <!-- Your contact information -->
                </div>
            </div>
        </div>
    </div>
</main>
<script>
    document.getElementById("id_music").addEventListener("change", function () {
        const fileInput = this;
        if (fileInput.files.length > 0) {
            const fileSize = fileInput.files[0].size; // in bytes
            const maxSize = 10 * 1024 * 1024; // 10MB
            if (fileSize > maxSize) {
                alert("File size exceeds the limit (10MB).");
                fileInput.value = ""; // Clear the input
            }
        }
    });
</script>
{% endblock %}



{% comment %}
{% extends 'wiljeanApp/base/base.html' %}

{% block title %} Upload {% endblock %}

{% block content %}
<main class="main-content " style="padding-top: 50px;">
    <div class="fullwidth-block inner-content">
        <div class="container">
            <h2 class="page-title ">Upload your Music</h2>
            {% if messages %}
                {% for message in messages %}
                <div class=" alert alert-dismissible alert-{{ message.tags }}">
                    <button type="button" class="button close" data-dismiss="alert">&times;</button>
                    {{ message }}
                </div>
                {% endfor %}
            {% endif %}
            <div class="row">
                <div class="col-md-6">
                    <form method="post" action="." enctype="multipart/form-data" class="contact-form">
                        {% csrf_token %}
                        {{ form.as_p }}
                        <input type="submit" value="Upload Music" class="btn btn-primary">
                    </form>
                </div>
                <div class="col-md-6">
                    <!-- Your contact information -->
                </div>
            </div>
        </div>
    </div>
</main>
<script>
    document.getElementById("music").addEventListener("change", function () {
        const fileInput = this;
        if (fileInput.files.length > 0) {
            const fileSize = fileInput.files[0].size; // in bytes
            const maxSize = 10 * 1024 * 1024; // 10MB
            if (fileSize > maxSize) {
                alert("File size exceeds the limit (10MB).");
                fileInput.value = ""; // Clear the input
            }
        }
    });
</script>
{% endblock %}
{% endcomment %}

