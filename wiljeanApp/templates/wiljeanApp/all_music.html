{% extends 'wiljeanApp/base/base.html' %}
{% load static %}

{% block title %} All Music  {% endblock %}

{% block content %}
<main class="main-content" style="padding-top: 50px;">
    <div class="fullwidth-block download">
        <div class="container">
            <div class="row">
                {% include 'wiljeanApp/base/search_base.html' %}
                {% if searches %}

                {% include 'wiljeanApp/base/search_body.html' %}
                
                {% else %}
                <div class="col-md-5 col-md-push-2">
                    <h2 class="page-title">Other Artists</h2>
                    {% for other in other_musics %}
                    <div class="item">
                        <h3 id="musicTitle" class="item-title">{{ other.title }} - by {{ other.artist }}</h3>
                        <span class="year">{{ other.publish_date|date:"Y" }}</span>
                        <a href="{% url 'download_other_music' other.id %}" class="button small primary">Download</a>
                        <a href="{% url 'play_mp3' other_music_id=other.id  music_id=0 %}" class="button small secondary">Play</a>
                        {% if user == other.user or user.is_staff %}
                        <a href="{% url 'edit_music' other.id %}" class="button small secondary ">Edit</a>
                        <a href="{% url 'confirmation' other_music_id=other.id wil_id=0 %}" class="button small secondary">Delete</a>
                        {% endif %}
                        <div class="social-share">
                            <span>Share:</span>
                            <a id="facebookShareBtn" href="#"><i class="fa fa-facebook"></i></a>
                            <a id="twitterShareBtn" href="#"><i class="fa fa-twitter"></i></a>
                            <a id="googlePlusShareBtn" href="#"><i class="fa fa-google-plus"></i></a>
                            <a id="pinterestShareBtn" href="#"><i class="fa fa-pinterest"></i></a>
                        </div>
                    </div>
                    {% endfor %}

                    <div class="pagination">
                        <span class="step-links">
                            {% if other_musics.has_previous %}
                                <a href="?page=1" class="pagination-link">&laquo; First</a>
                                <a href="?page={{ other_musics.previous_page_number }}" class="pagination-link">&lsaquo; Prev</a>
                            {% endif %}

                            <span class="current-page">
                                Page {{ other_musics.number }} of {{ other_musics.paginator.num_pages }}
                            </span>

                            {% if other_musics.has_next %}
                                <a href="?page={{ other_musics.next_page_number }}" class="pagination-link">Next &rsaquo;</a>
                                <a href="?page={{ other_musics.paginator.num_pages }}" class="pagination-link">Last &raquo;</a>
                            {% endif %}
                        </span>
                    </div>

                </div>
                {% endif %}
            </div>
        </div>
    </div>
</main>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const currentUrl = window.location.href;

        document.getElementById('facebookShareBtn').addEventListener('click', function(event) {
            event.preventDefault();
            const musicTitle = document.getElementById('musicTitle').innerText;
            shareOnFacebook(currentUrl, musicTitle);
        });

        document.getElementById('twitterShareBtn').addEventListener('click', function(event) {
            event.preventDefault();
            const musicTitle = document.getElementById('musicTitle').innerText;
            shareOnTwitter(currentUrl, musicTitle);
        });

        document.getElementById('googlePlusShareBtn').addEventListener('click', function(event) {
            event.preventDefault();
            const musicTitle = document.getElementById('musicTitle').innerText;
            shareOnGooglePlus(currentUrl, musicTitle);
        });

        document.getElementById('pinterestShareBtn').addEventListener('click', function(event) {
            event.preventDefault();
            const musicTitle = document.getElementById('musicTitle').innerText;
            shareOnPinterest(currentUrl, musicTitle);
        });
    });

    function shareOnFacebook(url, title) {
        const shareUrl = 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(url) + '&title=' + encodeURIComponent(title);
        window.open(shareUrl, '_blank');
    }

    function shareOnTwitter(url, title) {
        const shareUrl = 'https://twitter.com/intent/tweet?url=' + encodeURIComponent(url) + '&text=' + encodeURIComponent('Check out this music: ' + title);
        window.open(shareUrl, '_blank');
    }

    function shareOnGooglePlus(url, title) {
        const shareUrl = 'https://plus.google.com/share?url=' + encodeURIComponent(url) + '&text=' + encodeURIComponent(title);
        window.open(shareUrl, '_blank');
    }

    function shareOnPinterest(url, title) {
        const shareUrl = 'https://pinterest.com/pin/create/button/?url=' + encodeURIComponent(url) + '&description=' + encodeURIComponent('Check out this music: ' + title);
        window.open(shareUrl, '_blank');
    }
</script>

{% endblock %}
